<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini-Jeux</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif; }
        body { background: #222; color: white; text-align: center; }
        h1 { margin: 20px; }
        .container { max-width: 800px; margin: auto; }
        .menu { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; }
        .game-btn { background: #444; padding: 15px; border: none; color: white; font-size: 18px; cursor: pointer; }
        .game-btn:hover { background: #666; }
        canvas { background: black; display: block; margin: 20px auto; }
        #game-container { display: none; }
        .back-btn { margin-top: 10px; background: red; padding: 10px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>Mini-Jeux</h1>
    <div class="container">
        <div class="menu">
            <button class="game-btn" onclick="startGame('snake')">Snake</button>
            <button class="game-btn" onclick="startGame('tic-tac-toe')">Tic-Tac-Toe</button>
            <button class="game-btn" onclick="startGame('flappy')">Flappy Bird</button>
            <button class="game-btn" onclick="startGame('pong')">Pong</button>
            <button class="game-btn" onclick="startGame('memory')">Memory Game</button>
        </div>
        <div id="game-container">
            <canvas id="gameCanvas"></canvas>
            <button class="back-btn" onclick="showMenu()">Retour au Menu</button>
        </div>
    </div>

    <script>
        let currentGame = null;

        function showMenu() {
            document.querySelector('.menu').style.display = 'flex';
            document.getElementById('game-container').style.display = 'none';
        }

        function startGame(game) {
            document.querySelector('.menu').style.display = 'none';
            document.getElementById('game-container').style.display = 'block';
            let canvas = document.getElementById('gameCanvas');
            let ctx = canvas.getContext('2d');
            canvas.width = 400;
            canvas.height = 400;
            
            if (currentGame) clearInterval(currentGame);

            if (game === 'snake') startSnake(ctx);
            if (game === 'tic-tac-toe') startTicTacToe(ctx);
            if (game === 'flappy') startFlappyBird(ctx);
            if (game === 'pong') startPong(ctx);
            if (game === 'memory') startMemoryGame(ctx);
        }

        function startSnake(ctx) {
            let snake = [{ x: 10, y: 10 }];
            let direction = 'RIGHT';
            let food = { x: Math.floor(Math.random() * 20) * 20, y: Math.floor(Math.random() * 20) * 20 };

            function gameLoop() {
                let head = { ...snake[0] };
                if (direction === 'UP') head.y -= 20;
                if (direction === 'DOWN') head.y += 20;
                if (direction === 'LEFT') head.x -= 20;
                if (direction === 'RIGHT') head.x += 20;

                if (head.x < 0 || head.x >= 400 || head.y < 0 || head.y >= 400 || snake.some(s => s.x === head.x && s.y === head.y)) {
                    alert('Game Over !');
                    showMenu();
                    return;
                }

                snake.unshift(head);
                if (head.x === food.x && head.y === food.y) {
                    food = { x: Math.floor(Math.random() * 20) * 20, y: Math.floor(Math.random() * 20) * 20 };
                } else {
                    snake.pop();
                }

                ctx.fillStyle = 'black';
                ctx.fillRect(0, 0, 400, 400);
                ctx.fillStyle = 'lime';
                snake.forEach(s => ctx.fillRect(s.x, s.y, 20, 20));
                ctx.fillStyle = 'red';
                ctx.fillRect(food.x, food.y, 20, 20);
            }

            document.addEventListener('keydown', e => {
                if (e.key === 'ArrowUp' && direction !== 'DOWN') direction = 'UP';
                if (e.key === 'ArrowDown' && direction !== 'UP') direction = 'DOWN';
                if (e.key === 'ArrowLeft' && direction !== 'RIGHT') direction = 'LEFT';
                if (e.key === 'ArrowRight' && direction !== 'LEFT') direction = 'RIGHT';
            });

            currentGame = setInterval(gameLoop, 100);
        }

        function startTicTacToe(ctx) {
            let board = Array(9).fill(null);
            let player = 'X';
            let winner = null;

            function drawBoard() {
                ctx.fillStyle = 'black';
                ctx.fillRect(0, 0, 400, 400);
                ctx.strokeStyle = 'white';
                ctx.lineWidth = 4;
                for (let i = 1; i < 3; i++) {
                    ctx.moveTo(i * 133, 0);
                    ctx.lineTo(i * 133, 400);
                    ctx.moveTo(0, i * 133);
                    ctx.lineTo(400, i * 133);
                }
                ctx.stroke();

                board.forEach((val, i) => {
                    if (val) {
                        ctx.fillStyle = val === 'X' ? 'red' : 'blue';
                        ctx.font = '50px Arial';
                        ctx.fillText(val, (i % 3) * 133 + 50, Math.floor(i / 3) * 133 + 80);
                    }
                });
            }

            canvas.addEventListener('click', e => {
                if (winner) return;
                let x = Math.floor(e.offsetX / 133);
                let y = Math.floor(e.offsetY / 133);
                let index = y * 3 + x;
                if (!board[index]) {
                    board[index] = player;
                    player = player === 'X' ? 'O' : 'X';
                    checkWinner();
                }
                drawBoard();
            });

            function checkWinner() {
                let lines = [
                    [0, 1, 2], [3, 4, 5], [6, 7, 8],
                    [0, 3, 6], [1, 4, 7], [2, 5, 8],
                    [0, 4, 8], [2, 4, 6]
                ];
                lines.forEach(([a, b, c]) => {
                    if (board[a] && board[a] === board[b] && board[a] === board[c]) {
                        winner = board[a];
                        alert(winner + ' a gagn√© !');
                        showMenu();
                    }
                });
            }

            drawBoard();
        }

    </script>
</body>
</html>
